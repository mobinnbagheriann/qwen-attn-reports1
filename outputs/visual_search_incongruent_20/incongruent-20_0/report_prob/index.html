<!doctype html>
<html><head><meta charset="utf-8"/>
<title>incongruent-20_0 — Layer-wise (prob)</title>
<style>
body{font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;margin:20px}
.controls{position:sticky;top:0;background:#fff;padding:10px 0;border-bottom:1px solid #ddd;z-index:2}
.row{display:grid;grid-template-columns:120px 1fr;gap:12px;align-items:start;margin:12px 0}
.layer{font-weight:600;color:#333}
img{max-width:100%;height:auto;border:1px solid #eee;box-shadow:0 1px 3px rgba(0,0,0,.06)}
.help{color:#555;font-size:13px;margin-top:6px}
</style></head>
<body>
<div class="controls">
  <div><strong>Image:</strong> incongruent-20_0</div>
  <div><em>Mode:</em> prob</div>
  <label for="toksel"><strong>Generated token</strong> (index — text): </label>
  <select id="toksel"><option value="0">00 — Let</option>
<option value="1">01 — ▯</option>
<option value="2">02 —  addCriterion</option>
<option value="3">03 — ▯</option>
<option value="4">04 — 1</option>
<option value="5">05 — .</option>
<option value="6">06 —  The</option>
<option value="7">07 —  shapes</option>
<option value="8">08 —  in</option>
<option value="9">09 —  the</option>
<option value="10">10 —  image</option>
<option value="11">11 —  are</option>
<option value="12">12 — :
</option>
<option value="13">13 — ▯</option>
<option value="14">14 —  -</option>
<option value="15">15 —  Red</option>
<option value="16">16 —  &#x27;</option>
<option value="17">17 — L</option>
<option value="18">18 — &#x27;s</option>
<option value="19">19 —  at</option>
<option value="20">20 —  in</option>
<option value="21">21 — ▯</option>
<option value="22">22 — 9</option>
<option value="23">23 —  positions</option>
<option value="24">24 — .
</option>
<option value="25">25 — ▯</option>
<option value="26">26 —  -</option>
<option value="27">27 —  Green</option>
<option value="28">28 —  &#x27;</option>
<option value="29">29 — T</option>
<option value="30">30 — &#x27;</option>
<option value="31">31 —  in</option>
<option value="32">32 — ▯</option>
<option value="33">33 — 3</option>
<option value="34">34 —  positions</option>
<option value="35">35 — .

</option>
<option value="36">36 — 2</option>
<option value="37">37 — .</option>
<option value="38">38 —  Conclusion</option>
<option value="39">39 — :
</option>
<option value="40">40 — ▯</option>
<option value="41">41 —  -</option>
<option value="42">42 —  There</option>
<option value="43">43 —  are</option>
<option value="44">44 —  no</option>
<option value="45">45 —  green</option>
<option value="46">46 —  &#x27;</option>
<option value="47">47 — L</option>
<option value="48">48 — &#x27;s</option>
<option value="49">49 —  in</option>
<option value="50">50 —  the</option>
<option value="51">51 —  image</option>
<option value="52">52 — .

</option>
<option value="53">53 — [</option>
<option value="54">54 — Final</option>
<option value="55">55 —  Answer</option>
<option value="56">56 — :</option>
<option value="57">57 —  False</option>
<option value="58">58 — ]</option>
<option value="59">59 — ▯</option></select>
  <div id="tok_label" class="help"></div>
  <div class="help">
    prob = L1-normalized over visual tokens (sum=1; shows allocation).
    energy = prob × total image attention (shows allocation + magnitude).
  </div>
</div>

    <div class="row">
      <div class="layer">Layer 0</div>
      <img id="img_L0" src="" alt="Layer 0">
    </div>

    <div class="row">
      <div class="layer">Layer 1</div>
      <img id="img_L1" src="" alt="Layer 1">
    </div>

    <div class="row">
      <div class="layer">Layer 10</div>
      <img id="img_L10" src="" alt="Layer 10">
    </div>

    <div class="row">
      <div class="layer">Layer 11</div>
      <img id="img_L11" src="" alt="Layer 11">
    </div>

    <div class="row">
      <div class="layer">Layer 12</div>
      <img id="img_L12" src="" alt="Layer 12">
    </div>

    <div class="row">
      <div class="layer">Layer 13</div>
      <img id="img_L13" src="" alt="Layer 13">
    </div>

    <div class="row">
      <div class="layer">Layer 14</div>
      <img id="img_L14" src="" alt="Layer 14">
    </div>

    <div class="row">
      <div class="layer">Layer 15</div>
      <img id="img_L15" src="" alt="Layer 15">
    </div>

    <div class="row">
      <div class="layer">Layer 16</div>
      <img id="img_L16" src="" alt="Layer 16">
    </div>

    <div class="row">
      <div class="layer">Layer 17</div>
      <img id="img_L17" src="" alt="Layer 17">
    </div>

    <div class="row">
      <div class="layer">Layer 18</div>
      <img id="img_L18" src="" alt="Layer 18">
    </div>

    <div class="row">
      <div class="layer">Layer 19</div>
      <img id="img_L19" src="" alt="Layer 19">
    </div>

    <div class="row">
      <div class="layer">Layer 2</div>
      <img id="img_L2" src="" alt="Layer 2">
    </div>

    <div class="row">
      <div class="layer">Layer 20</div>
      <img id="img_L20" src="" alt="Layer 20">
    </div>

    <div class="row">
      <div class="layer">Layer 21</div>
      <img id="img_L21" src="" alt="Layer 21">
    </div>

    <div class="row">
      <div class="layer">Layer 22</div>
      <img id="img_L22" src="" alt="Layer 22">
    </div>

    <div class="row">
      <div class="layer">Layer 23</div>
      <img id="img_L23" src="" alt="Layer 23">
    </div>

    <div class="row">
      <div class="layer">Layer 24</div>
      <img id="img_L24" src="" alt="Layer 24">
    </div>

    <div class="row">
      <div class="layer">Layer 25</div>
      <img id="img_L25" src="" alt="Layer 25">
    </div>

    <div class="row">
      <div class="layer">Layer 26</div>
      <img id="img_L26" src="" alt="Layer 26">
    </div>

    <div class="row">
      <div class="layer">Layer 27</div>
      <img id="img_L27" src="" alt="Layer 27">
    </div>

    <div class="row">
      <div class="layer">Layer 3</div>
      <img id="img_L3" src="" alt="Layer 3">
    </div>

    <div class="row">
      <div class="layer">Layer 4</div>
      <img id="img_L4" src="" alt="Layer 4">
    </div>

    <div class="row">
      <div class="layer">Layer 5</div>
      <img id="img_L5" src="" alt="Layer 5">
    </div>

    <div class="row">
      <div class="layer">Layer 6</div>
      <img id="img_L6" src="" alt="Layer 6">
    </div>

    <div class="row">
      <div class="layer">Layer 7</div>
      <img id="img_L7" src="" alt="Layer 7">
    </div>

    <div class="row">
      <div class="layer">Layer 8</div>
      <img id="img_L8" src="" alt="Layer 8">
    </div>

    <div class="row">
      <div class="layer">Layer 9</div>
      <img id="img_L9" src="" alt="Layer 9">
    </div>
<script>
    const layers = [0, 1, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 2, 20, 21, 22, 23, 24, 25, 26, 27, 3, 4, 5, 6, 7, 8, 9];
    const overlayDir = 'overlays_original_prob_title';
    function sanitize(s) {
      return (s||"").replace(/\n|\t/g," ").replace(/[^a-zA-Z0-9._\- ]/g,"_").trim().slice(0,30) || "tok";
    }
    const tokens = ["Let", "\u25af", " addCriterion", "\u25af", "1", ".", " The", " shapes", " in", " the", " image", " are", ":\n", "\u25af", " -", " Red", " '", "L", "'s", " at", " in", "\u25af", "9", " positions", ".\n", "\u25af", " -", " Green", " '", "T", "'", " in", "\u25af", "3", " positions", ".\n\n", "2", ".", " Conclusion", ":\n", "\u25af", " -", " There", " are", " no", " green", " '", "L", "'s", " in", " the", " image", ".\n\n", "[", "Final", " Answer", ":", " False", "]", "\u25af"];
    function update(idx){
      const tok = tokens[idx]; const tag = sanitize(tok);
      layers.forEach(L => {
        const rel = `../layer_${L}/${overlayDir}/token_${String(idx).padStart(2,'0')}_[${tag}].png`;
        const img = document.getElementById(`img_L${L}`);
        img.src = rel; img.title = `Layer ${L} — token ${idx} [${tok}]`;
      });
      document.getElementById('tok_label').textContent = `[${String(idx).padStart(2,'0')}]  ${tok}`;
    }
    window.addEventListener('DOMContentLoaded', () => {
      const sel = document.getElementById('toksel');
      sel.addEventListener('change', e => update(parseInt(e.target.value)));
      update(parseInt(sel.value));
    });
    </script>
</body></html>